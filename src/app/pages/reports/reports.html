<div class="tab-content">
  <div class="tab-panel active show" id="weather" role="tabpanel">
    <div class="container-fluid mt-1">
      <div class="row align-items-stretch p-4 pe-0 gx-5 gy-3 mapflex">
        <div class="crpd col-lg-5 col-md-5 col-sm-12 equal-height-panel">
          <div
            class="bg-light d-flex flex-column justify-content-between w-100"
          >
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5 class="text-success mb-0">{{ location }}</h5>

              <div class="dropdown circle-dropdown-map">
                <button
                  class="btn stylish-btn w-100 dropdown-toggle"
                  type="button"
                  id="exportPdfDropdownBtn"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  <i class="btn-success fas fa-file-pdf me-1"></i>
                  Circle PDF
                </button>

                <div
                  class="dropdown-menu show-dropdown shadow"
                  aria-labelledby="exportPdfDropdownBtn"
                >
                  <select
                    class="form-select stylish-select"
                    id="exportPdfSelect"
                    [value]="selectedPDFCircle"
                    (change)="pdfdownload($event)"
                    size="6"
                  >
                    <ng-container *ngFor="let option of circleOptions">
                      <option [value]="option.value">{{ option.label }}</option>
                    </ng-container>
                  </select>
                </div>
              </div>
            </div>

            <div
              class="card flex-grow-1 p-3 weather-card"
              style="background-color: white; border: 1px solid #b2f0b2"
            >
              <div class="weather-header">
                <p class="text-muted fw-bold mb-1">TODAYâ€™S WEATHER</p>
                <p class="text-secondary small mb-1">{{ currentTime }}</p>
              </div>
              <div class="mt-4 mb-4">
                <div class="circle-layout mt-5">
                  <div
                    class="circle-kpi"
                    *ngFor="let item of weatherKPIs; let i = index"
                  >
                    <div class="circle-inner">
                      <div class="min-value">{{ item.max }}</div>
                      <div class="weather-icon" [innerHTML]="item.icon"></div>
                      <div class="max-value">{{ item.min }}</div>
                    </div>
                    <div class="circle-label">{{ item.label}}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-7 col-md-7 col-sm-12 map-panel">
          <div class="equal-height-panel w-100 h-100">
            <app-map-weather
              class="w-100 h-100 d-block"
              (callParentFun2)="hazardToggleOff2($event)"
            ></app-map-weather>
          </div>
        </div>
      </div>

      <div class="accordion mt-3" id="dashboardAccordion">
        <div class="accordion-item" *ngIf="isBrowser">
          <h2 class="accordion-header" id="headingBarSection">
            <button
              class="accordion-button"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#barSection"
              aria-expanded="true"
              aria-controls="barSection"
              style="font-size: 20px"
            >
              Weather Parameter Breakdown
            </button>
          </h2>

          <div
            id="barSection"
            class="accordion-collapse collapse show"
            aria-labelledby="headingBarSection"
          >
            <div class="bg-white">
              <div class="row g-0 chart-row">
                <div class="col-12 p-0 border bg-light">
                  <div class="chart-box bg-white">
                    <h6 class="fw-bold">Number of Districts</h6>
                    <canvas
                      baseChart
                      [data]="barChartData1"
                      [options]="barChartOptions1"
                      [legend]="barChartLegend"
                      [type]="barChartType"
                    ></canvas>
                  </div>
                </div>
              </div>
            </div>
            <div class="shadow-sm p-3 bg-white rounded">
              <h6 class="chart-box fw-bold">
                Weather Intensity Breakdown by Category (Next 6-days) District
                Count
              </h6>
              <div class="d-flex" style="overflow-x: auto">
                <div class="icon-column bg-light rounded shadow-sm me-3">
                  <span
                    class="d-inline-block mb-2"
                    style="
                      height: 30px;
                      line-height: 30px;
                      font-weight: 600;
                      font-size: 14px;
                    "
                    >Date</span
                  >

                  <div *ngFor="let icon of icons" class="icon-cell mb-2">
                    <div class="weather-icon p-2" [innerHTML]="icon"></div>
                  </div>
                </div>

                <div class="cards-container d-flex flex-wrap">
                  <div
                    *ngFor="let day of days; let i = index"
                    class="day-card p-3 bg-light rounded boxshadow"
                  >
                    <div class="card-header mb-2 d-flex justify-content-center">
                      <div>{{ day.name }}</div>
                      ,&nbsp;
                      <div>{{ day.date }}</div>
                    </div>

                    <div
                      *ngFor="let tower of mappedTowerData?.[i+1]"
                      class="value-row d-flex justify-content-between"
                    >
                      <div
                        class="value-box"
                        [style.background-color]="tower.value1color"
                      >
                        {{ tower.value1 }}
                      </div>
                      <div
                        class="value-box"
                        [style.background-color]="tower.value2color"
                      >
                        {{ tower.value2 }}
                      </div>
                      <div
                        class="value-box"
                        [style.background-color]="tower.value3color"
                      >
                        {{ tower.value3 }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!--  Severity Table  -->
            <div class="table-responsive-2 shadow-sm mt-4 pb-8">
              <table class="table text-center align-middle">
                <thead>
                  <tr>
                    <th>Severity</th>

                    <th>
                      <!-- <img src="assets/icons/rainfall.svg" class="icon-size me-1" /> -->
                      <div
                        class="d-flex justify-content-center align-items-center"
                      >
                        <div class="weather-icon me-2">
                          <i class="fas fa-cloud-showers-heavy"></i>
                        </div>
                        Rainfall
                      </div>
                    </th>

                    <th>
                      <!-- <img src="assets/icons/wind.svg" class="icon-size me-1" /> -->
                      <div
                        class="d-flex justify-content-center align-items-center"
                      >
                        <div class="weather-icon me-2">
                          <i class="fa-solid fa-wind"></i>
                        </div>
                        Wind
                      </div>
                    </th>

                    <th>
                      <!-- <img src="assets/icons/Humidity.svg" class="icon-size me-1" /> -->
                      <div
                        class="d-flex justify-content-center align-items-center"
                      >
                        <div class="weather-icon me-2">
                          <i class="fa-solid fa-droplet"></i>
                        </div>
                        Humidity
                      </div>
                    </th>
                    <th>
                      <!-- <img src="assets/icons/Fog.png" class="icon-size me-1" /> -->
                      <div
                        class="d-flex justify-content-center align-items-center"
                      >
                        <div class="weather-icon me-2">
                          <i class="fas fa-solid fa-eye"></i>
                        </div>
                        Visibility
                      </div>
                    </th>

                    <th>
                      <!-- <img src="assets/icons/temp.svg" class="icon-size me-1" /> -->
                      <div
                        class="d-flex justify-content-center align-items-center"
                      >
                        <div class="weather-icon me-2">
                          <i class="fa-solid fa-temperature-half"></i>
                        </div>
                        Temp (max)
                      </div>
                    </th>

                    <th>
                      <!-- <img src="assets/icons/temp.svg" class="icon-size me-1" /> -->
                      <div
                        class="d-flex justify-content-center align-items-center"
                      >
                        <div class="weather-icon me-2">
                          <i class="fa-solid fa-temperature-half"></i>
                        </div>
                        Temp (min)
                      </div>
                    </th>
                  </tr>
                </thead>
                <tbody *ngIf="severityTable?.length">
                  <tr *ngFor="let severity of severityTable">
                    <td
                      class="fw-bold"
                      [style.background-color]="severity.temperatureColor"
                    >
                      {{ severity.label }}
                    </td>
                    <td>{{ severity.rainfall }}</td>
                    <td>{{ severity.wind }}</td>
                    <td>{{ severity.humidity }}</td>
                    <td>{{ severity.visibility }}</td>
                    <td>{{ severity.temperature }}</td>
                    <td>
                      <input
                        type="color"
                        [value]="severity.min_tempColor"
                        [ngStyle]="{
                                    width: '20px',
                                    height: '20px',
                                    border: 'none',
                                    padding: '0',
                                    'margin-right': severity.label === 'Extreme' ? '15px' : '10px'
                                  }"
                      />
                      {{ severity.min_temp }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Accordion: Districts At Varying Risk -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingSeverity">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseSeverity"
              aria-expanded="false"
              aria-controls="collapseSeverity"
              style="font-size: 20px"
            >
              Districts At Varying Risk On {{ currentDate }}
            </button>
          </h2>

          <div
            id="collapseSeverity"
            class="accordion-collapse collapse"
            aria-labelledby="headingSeverity"
          >
            <div class="bg-white">
              <div class="weatherRisk-container">
                <!-- Section subtitle -->
                <p class="weatherRisk-subtitle">
                  The table provides the distribution of districts under varying
                  weather risk category for {{ currentDate }}.
                </p>

                <div class="weatherRisk-table-wrapper">
                  <table class="weatherRisk-table">
                    <!-- TABLE HEADER -->
                    <thead>
                      <tr>
                        <th class="param-header">Weather Parameters</th>
                        <th class="risk-extreme">Extreme</th>
                        <th class="risk-high">High</th>
                        <th class="risk-moderate">Moderate</th>
                        <th class="risk-low">Low</th>
                      </tr>
                    </thead>

                    <!-- TABLE BODY -->
                    <tbody>
                      <!-- RAINFALL -->
                      <tr>
                        <td>
                          <div class="d-flex align-items-center gap-3">
                            <i
                              class="fas fa-cloud-showers-heavy weather-icon"
                            ></i>
                            <span>Rainfall</span>
                          </div>
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Rainfall?.extreme_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Rainfall?.high_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Rainfall?.moderate_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Rainfall?.low_districts?.join(',
                          ') || "Nil" }}
                        </td>
                      </tr>

                      <!-- WIND -->
                      <tr>
                        <td>
                          <div class="d-flex align-items-center gap-3">
                            <i class="fa-solid fa-compass weather-icon"></i>
                            Wind
                          </div>
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Wind?.extreme_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Wind?.high_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Wind?.moderate_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Wind?.low_districts?.join(',
                          ') || "Nil" }}
                        </td>
                      </tr>

                      <!-- HUMIDITY -->
                      <tr>
                        <td>
                          <div class="d-flex align-items-center gap-3">
                            <i class="fa-solid fa-droplet weather-icon"></i>
                            Humidity
                          </div>
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Humidity?.extreme_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Humidity?.high_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Humidity?.moderate_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Humidity?.low_districts?.join(',
                          ') || "Nil" }}
                        </td>
                      </tr>

                      <!-- VISIBILITY -->
                      <tr>
                        <td>
                          <div class="d-flex align-items-center gap-3">
                            <i class="fa-solid fa-eye weather-icon"></i>
                            Visibility
                          </div>
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Visibility?.extreme_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Visibility?.high_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Visibility?.moderate_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Visibility?.low_districts?.join(',
                          ') || "Nil" }}
                        </td>
                      </tr>

                      <!-- TEMP MAX -->
                      <tr>
                        <td>
                          <div class="d-flex align-items-center gap-3">
                            <i
                              class="fa-solid fa-temperature-half weather-icon"
                            ></i>
                            Temp (max)
                          </div>
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Temperature_Max?.extreme_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Temperature_Max?.high_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Temperature_Max?.moderate_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Temperature_Max?.low_districts?.join(',
                          ') || "Nil" }}
                        </td>
                      </tr>

                      <!-- TEMP MIN -->
                      <tr>
                        <td>
                          <div class="d-flex align-items-center gap-3">
                            <i
                              class="fa-solid fa-temperature-half weather-icon"
                            ></i>
                            Temp (min)
                          </div>
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Temperature_Min?.extreme_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Temperature_Min?.high_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Temperature_Min?.moderate_districts?.join(',
                          ') || "Nil" }}
                        </td>
                        <td>
                          {{
                          responseDataSeverityWise?.Temperature_Min?.low_districts?.join(',
                          ') || "Nil" }}
                        </td>
                      </tr>

                      <!-- MIN TEMP COLOR KEY -->
                      <tr>
                        <td class="p-0" style="background-color: #f0f0f0">
                          <div
                            class="d-flex align-items-center gap-3 fw-bold mx-2"
                          >
                            Weather Parameter (Temp. min)
                          </div>
                        </td>
                        <td class="minExtreme fw-bold">Extreme</td>
                        <td class="minHigh fw-bold">High</td>
                        <td class="minModerate fw-bold">Moderate</td>
                        <td class="minLow fw-bold">Low</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Accordion: 7 - Day Forecast-->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingForecast">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseForecast"
              aria-expanded="false"
              aria-controls="collapseForecast"
              style="font-size: 20px"
            >
              7 Day - Weather Forecast
            </button>
          </h2>

          <div
            id="collapseForecast"
            class="accordion-collapse collapse"
            aria-labelledby="headingForecast"
          >
            <div class="bg-white">
              <!-- TAB BUTTONS -->
              <div
                class="summary-table-container d-flex flex-wrap gap-3 mb-4 mt-4"
              >
                <button
                  class="btn btn-outline-success btn-sm px-2 py-1 text-nowrap d-flex align-items-center justify-content-center gap-2"
                  [ngClass]="{ 'active': activeTab === 'rainfall' }"
                  (click)="setActive('rainfall')"
                >
                  <i class="fas fa-cloud-showers-heavy"></i> Rainfall
                </button>

                <button
                  class="btn btn-outline-success"
                  [ngClass]="{ 'active': activeTab === 'accu_rainfall' }"
                  (click)="setActive('accu_rainfall')"
                >
                  <i class="fas fa-cloud-showers-heavy"></i> Accu Rainfall
                </button>

                <button
                  class="btn btn-outline-success"
                  [ngClass]="{ 'active': activeTab === 'wind' }"
                  (click)="setActive('wind')"
                >
                  <i class="fas fa-wind"></i> Wind
                </button>

                <button
                  class="btn btn-outline-success"
                  [ngClass]="{ 'active': activeTab === 'humidity' }"
                  (click)="setActive('humidity')"
                >
                  <i class="fa-solid fa-droplet"></i> Humidity
                </button>

                <button
                  class="btn btn-outline-success"
                  [ngClass]="{ 'active': activeTab === 'visibility' }"
                  (click)="setActive('visibility')"
                >
                  <i class="fa-solid fa-eye"></i> Visibility
                </button>

                <button
                  class="btn btn-outline-success"
                  [ngClass]="{ 'active': activeTab === 'temperature' }"
                  (click)="setActive('temperature')"
                >
                  <i class="fas fa-temperature-high"></i> Temperature
                </button>
              </div>

              <!-- MAIN TABLE WRAPPER -->
              <div class="mt-3">
                <div class="rainfall-table-wrapper">
                  <!-- HEADING -->
                  <div class="heading-7dfc">
                    <span>{{ headingMap[activeTab] }}</span>
                  </div>

                  <!-- LEGEND SECTION -->
                  <div class="legend" *ngIf="legendData">
                    <div class="legend-item">
                      <p class="rainfall-legend">Legend</p>
                    </div>

                    <div class="legend-wrapper">
                      <!-- MIN TEMP LEGEND -->
                      <div
                        *ngIf="activeTab === 'temperature'"
                        class="legend_center"
                      >
                        <div class="legend-item">
                          <div class="fw-bold">Min Temp.</div>
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch minExtreme"></div>
                          Extreme ({{ legendData['min_temp']?.extreme }})
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch minHigh"></div>
                          High ({{ legendData['min_temp']?.high }})
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch minModerate"></div>
                          Moderate ({{ legendData['min_temp']?.moderate }})
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch minLow"></div>
                          Low ({{ legendData['min_temp']?.low }})
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch minOther"></div>
                          Other (&gt;-1.5)
                        </div>
                      </div>

                      <!-- MAX TEMP + OTHER SECTIONS -->
                      <div class="legend_center">
                        <div
                          class="legend-item"
                          *ngIf="activeTab === 'temperature'"
                        >
                          <div class="fw-bold">Max Temp.</div>
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch Extreme"></div>
                          Extreme ({{ legendData[activeTab]?.extreme }})
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch High"></div>
                          High ({{ legendData[activeTab]?.high }})
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch Moderate"></div>
                          Moderate ({{ legendData[activeTab]?.moderate }})
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch Low"></div>
                          Low ({{ legendData[activeTab]?.low }})
                        </div>

                        <div
                          class="legend-item"
                          *ngIf="activeTab === 'temperature'"
                        >
                          <div class="legend-swatch minLow"></div>
                          Other (&lt;1.5)
                        </div>

                        <div
                          class="legend-item"
                          *ngIf="activeTab === 'accu_rainfall'"
                        >
                          <div class="legend-swatch minLow"></div>
                          Other (&lt;7.2)
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- TABLE -->
                  <div>
                    <table>
                      <thead>
                        <!-- DEFAULT HEADER -->
                        <ng-container
                          *ngIf="activeTab !== 'temperature' && activeTab !== 'accu_rainfall'"
                        >
                          <tr class="district">
                            <th rowspan="3" class="text-start">Districts</th>
                            <th colspan="3" class="group-header">
                              Short Range
                            </th>
                            <th colspan="4" class="group-header">Long Range</th>
                          </tr>

                          <tr class="district">
                            <th *ngFor="let d of datesRange">{{ d }}</th>
                          </tr>
                        </ng-container>

                        <!-- ACCUMULATED RAINFALL HEADER -->
                        <ng-container *ngIf="activeTab === 'accu_rainfall'">
                          <tr class="district">
                            <th class="text-start">Districts</th>
                            <th *ngFor="let d of datesRange.slice(0,3)">
                              {{ d }}
                            </th>
                          </tr>
                        </ng-container>

                        <!-- TEMPERATURE HEADER -->
                        <ng-container *ngIf="activeTab === 'temperature'">
                          <tr class="district">
                            <th rowspan="3" style="width: 80px">Districts</th>
                            <th colspan="6" class="short-range">Short Range</th>
                            <th colspan="8" class="long-range">Long Range</th>
                          </tr>

                          <tr class="district">
                            <ng-container *ngFor="let d of datesRange">
                              <th colspan="2">{{ d }}</th>
                            </ng-container>
                          </tr>

                          <tr class="district">
                            <ng-container *ngFor="let d of datesRange">
                              <th style="width: 30px">Min</th>
                              <th style="width: 30px">Max</th>
                            </ng-container>
                          </tr>
                        </ng-container>
                      </thead>

                      <tbody>
                        <tr *ngFor="let rec of responseDataDistrictWise">
                          <!-- DISTRICT NAME -->
                          <td class="text-start">{{ rec.district }}</td>

                          <!-- TEMPERATURE BODY -->
                          <ng-container *ngIf="activeTab === 'temperature'">
                            <ng-container *ngFor="let i of [1,2,3,4,5,6,7]">
                              <td
                                [ngClass]="'min' + rec['min' + i + '_severity']"
                              >
                                {{ rec['min' + i] }} {{ activeKPIUnit }}
                              </td>

                              <td [ngClass]="rec['day' + i + '_severity']">
                                {{ rec['day' + i] }} {{ activeKPIUnit }}
                              </td>
                            </ng-container>
                          </ng-container>

                          <!-- ACCUMULATED RAINFALL BODY -->
                          <ng-container *ngIf="activeTab === 'accu_rainfall'">
                            <ng-container *ngFor="let i of [1,2,3]">
                              <td [ngClass]="rec['day' + i + '_severity']">
                                {{ rec['day' + i] }} {{ activeKPIUnit }}
                              </td>
                            </ng-container>
                          </ng-container>

                          <!-- DEFAULT KPI BODY -->
                          <ng-container
                            *ngIf="activeTab !== 'temperature' && activeTab !== 'accu_rainfall'"
                          >
                            <ng-container *ngFor="let i of [1,2,3,4,5,6,7]">
                              <td [ngClass]="rec['day' + i + '_severity']">
                                {{ rec['day' + i] }} {{ activeKPIUnit }}
                              </td>
                            </ng-container>
                          </ng-container>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Accordion: 7 - Day Hazard Forecast-->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingHazard">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseHazard"
              aria-expanded="false"
              aria-controls="collapseHazard"
              style="font-size: 20px"
            >
              7 Day - Hazard Forecast
            </button>
          </h2>

          <div
            id="collapseHazard"
            class="accordion-collapse collapse"
            aria-labelledby="headingHazard"
          >
            <div class="bg-white">
              <!-- TAB BUTTONS -->
              <div
                class="summary-table-container d-flex flex-wrap gap-3 mb-4 mt-4"
              >
                <button
                  class="btn btn-outline-success btn-sm px-2 py-1 text-nowrap d-flex align-items-center justify-content-center gap-2"
                  [ngClass]="{ 'active': activeHazTab === 'flood' }"
                  (click)="setActiveHaz('flood')"
                >
                  <i class="fas fa-water"></i> Flood
                </button>

                <button
                  class="btn btn-outline-success"
                  [ngClass]="{ 'active': activeHazTab === 'cyclone' }"
                  (click)="setActiveHaz('cyclone')"
                >
                  <i class="fas fa-wind"></i> Cyclone
                </button>

                <button
                  class="btn btn-outline-success"
                  [ngClass]="{ 'active': activeHazTab === 'snowfall' }"
                  (click)="setActiveHaz('snowfall')"
                >
                  <i class="fa-solid fa-snowflake"></i> Snowfall
                </button>

                <button
                  class="btn btn-outline-success"
                  [ngClass]="{ 'active': activeHazTab === 'avalanche' }"
                  (click)="setActiveHaz('avalanche')"
                >
                  <i class="fas fa-mountain"></i> Avalanche
                </button>

                <button
                  class="btn btn-outline-success"
                  [ngClass]="{ 'active': activeHazTab === 'cloudburst' }"
                  (click)="setActiveHaz('cloudburst')"
                >
                  <i class="fas fa-cloud-bolt"></i> Cloudburst
                </button>
              </div>

              <!-- MAIN TABLE WRAPPER -->
              <div class="mt-3">
                <div class="rainfall-table-wrapper">
                  <!-- HEADING -->
                  <div class="heading-7dfc">
                    <span> {{ headingMapHaz[activeHazTab] }}</span>
                  </div>

                  <!-- LEGEND SECTION -->
                  <div class="legend" *ngIf="legendData">
                    <div class="legend-item">
                      <p class="rainfall-legend">Legend</p>
                    </div>

                    <div class="legend-wrapper">
                      <!-- Legend For Hazard SECTIONS -->
                      <div class="legend_center">
                        <div class="legend-item">
                          <div class="legend-swatch Extreme"></div>
                          Extreme (> = 25%)
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch High"></div>
                          High (10% - 25%)
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch Moderate"></div>
                          Moderate (5% - 10%)
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch Low"></div>
                          Low (2% - 5%)
                        </div>

                        <div class="legend-item">
                          <div class="legend-swatch minLow"></div>
                          Other (&lt;1.5)
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- TABLE -->
                  <div>
                    <table>
                      <thead>
                        <tr class="district">
                          <th rowspan="2">Districts</th>
                        </tr>

                        <tr class="district">
                          <th *ngFor="let d of datesRangeHaz">{{ d }}</th>
                        </tr>
                      </thead>

                      <tbody>
                        <tr>
                          <td>Bokaro</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                        </tr>
                        <tr>
                          <td>Chatra</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                        </tr>
                        <tr>
                          <td>Deoghar</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                        </tr>
                        <tr>
                          <td>Dhanbad</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                        </tr>
                        <tr>
                          <td>Pakur</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                          <td>No Risk</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
